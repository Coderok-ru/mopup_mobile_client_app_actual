### MopUp — мобильное приложение для заказа клининга

MopUp — клиентское мобильное приложение сервиса по заказу клининговых услуг на дом и в офис.  
Пользователь может оформить заказ уборки, выбрать город и формат услуги, отслеживать статус выполнения, получать push‑уведомления и управлять профилем и оплатами.

Приложение разрабатывается как часть экосистемы MopUp, включающей:
- сайт сервиса,
- административную панель для управления заказами, исполнителями и пуш‑уведомлениями,
- приложение для исполнителей (клинеров),
- Telegram‑бот с mini‑app для заказа услуг.  

Информация о сервисе и портфолио разработчика доступны на сайте [`coderok.ru`](https://coderok.ru).

---

### Основные возможности приложения

- **Создание заказа**:
  - выбор города и адреса;
  - выбор шаблона уборки и дополнительных услуг;
  - расчет итоговой стоимости в реальном времени.
- **Управление заказами**:
  - список активных и завершенных заказов;
  - экран детальной информации о заказе (адрес, услуги, время, стоимость);
  - корректное отображение статуса заказа:
    - 1 — «Ищем клинера»;
    - 2 — «Заказ принят»;
    - 3 — «Клинер в пути»;
    - 4 — «Начало работы»;
    - 5 — «Заказ выполнен»;
    - 6 — «Заказ завершен».
- **Push‑уведомления**:
  - получение push‑уведомлений через Firebase Cloud Messaging;
  - навигация из уведомления на нужный экран (список заказов, детали конкретного заказа, оплата, настройки);
  - поддержка изображений в уведомлениях (баннеры для маркетинговых и информационных рассылок).
- **Оплата**:
  - получение ссылки на оплату из backend;
  - отображение статуса платежа (например, «Новый», «Оплачен», «Отклонен»);
  - подсказки по тому, когда и как можно оплатить заказ.
- **Профиль пользователя**:
  - редактирование профиля (имя, контакты);
  - загрузка и изменение аватара;
  - управление адресами.
- **Любимые клинеры**:
  - добавление/удаление исполнителей в список избранных;
  - быстрый доступ к любимым клинерам при создании нового заказа.
- **Экран «О приложении»**:
  - информация о версии,
  - контакты службы поддержки,
  - данные о компании.
- **Настройки**:
  - включение/выключение различных типов уведомлений (статус заказа, напоминания, маркетинговые уведомления);
  - отдельный переключатель «Доступ к местоположению», синхронизированный с системными разрешениями;
  - синхронизация состояния переключателей с фактическими разрешениями Android/iOS.

---

### Push‑уведомления, навигация и изображения

В проекте реализован полноценный сервис уведомлений:

- **Firebase Messaging + flutter_local_notifications**:
  - инициализация каналов уведомлений на Android;
  - запрос разрешений на уведомления на Android/iOS/macOS;
  - получение FCM‑токена и обработка обновлений токена;
  - обработка foreground/background сообщений и кликов по уведомлению.

- **Навигация из уведомлений**:
  - поддерживаются ключи в `data`:
    - `type` — тип уведомления (`order`, `order_status`, `payment`, `settings`, «Реклама», «Информирование» и т.п.);
    - `screen` — явное указание экрана (`/orders`, `/order-details`, `/payment`, `/settings`, `/main`);
    - `order_id` — идентификатор заказа для открытия экрана деталей;
    - дополнительные поля (`notification_id`, `image_url` и др.) для тонкой настройки поведения.
  - логика навигации:
    - если указан `screen` — переход по маршруту `GetX` на нужный экран;
    - если указан `type` и `order_id` — открытие деталей заказа либо переход к списку заказов;
    - если указано только `order_id` — попытка открыть детали заказа;
    - по умолчанию — переход на главный экран.

- **Поддержка изображений**:
  - backend присылает URL изображения (`image_url` или `image` в `data`);
  - для Android:
    - сервис уведомлений скачивает изображение во временный файл;
    - картинка отображается через `BigPictureStyleInformation` (баннер + large icon);
  - для iOS:
    - рекомендуется передавать URL также в `notification.image` или `fcm_options.image` на стороне FCM;
  - примеры payload и готовые cURL‑запросы:
    - `docs/notification_navigation.md`
    - `docs/curl_examples.sh`

---

### Технологический стек

- **Язык и фреймворк**:
  - Flutter (Dart)
- **Навигация и состояние**:
  - GetX (`GetMaterialApp`, маршрутизация, контроллеры, `Obx`)
- **Уведомления и backend‑интеграции**:
  - Firebase Messaging
  - flutter_local_notifications
  - собственный `NotificationService` с обработкой навигации и изображений
- **Сеть и хранилище**:
  - Dio (HTTP‑клиент)
  - GetStorage (локальное key‑value хранилище)
- **Геолокация и карты**:
  - Geolocator
  - Yandex MapKit
- **UI и дополнительные библиотеки**:
  - flutter_svg, google_fonts, syncfusion виджеты, flutter_html и др.
- **Платформы**:
  - Android
  - iOS

---

### Структура проекта (упрощенно)

- `lib/core` — тема, константы, утилиты, глобальные биндинги.
- `lib/data`:
  - `models` — сущности (например, `OrderEntity`, `OrderStatusEntity`);
  - `repositories` — работа с API;
  - `services` — сервисы уведомлений, разрешений и т.п.
- `lib/presentation`:
  - `views` — экраны (заказы, детали заказа, профиль, настройки, о приложении и т.д.);
  - `controllers` — GetX‑контроллеры (логика работы экранов);
  - `widgets` — переиспользуемые виджеты.
- `lib/routes` — таблица маршрутов (`AppRoutes`, `AppPages`).
- `docs` — документация по push‑уведомлениям и примеры cURL.

---

### Запуск проекта локально

1. **Установите зависимости**:
   ```bash
   flutter pub get
   ```
2. **Добавьте свои конфигурации Firebase** (не хранятся в репозитории):
   - `android/app/google-services.json`
   - `ios/Runner/GoogleService-Info.plist`
3. **Соберите и запустите приложение**:
   ```bash
   flutter run
   ```

При необходимости настройте свои ключи карт, backend‑URL и другие окружения через `.env`/константы (в зависимости от вашей инфраструктуры).

---

### Разработчик

> Приложение разработано одним автором — **Андреем Любиченко**  
> (ник **Coderok**, персональный сайт: [`coderok.ru`](https://coderok.ru)).

#### О разработчике

**Андрей Любиченко (Coderok)** — разработчик мобильных и веб‑приложений с креативным мышлением и опытом коммерческой разработки более **13 лет**.  
Специализируется на проектировании и реализации законченных продуктов: от идеи и дизайна до публикации в сторах и дальнейшей поддержки.

<!-- Замените ссылку на реальный URL фотографии с coderok.ru при необходимости -->
![Андрей Любиченко — Coderok](https://coderok.ru)

- **Ключевые роли**:
  - Mobile App Developer (Flutter, Dart);
  - Web Developer (Laravel, Vue, REST API);
  - Backend Developer (REST API, интеграции, платежные системы);
  - Web Designer / UI/UX.

- **Основные направления работы**:
  - разработка web‑приложений любой сложности — от лендингов до CRM/админ‑панелей;
  - разработка кроссплатформенных мобильных приложений (Android, iOS, Windows, macOS);
  - разработка чат‑ботов и mini apps для Telegram и VK;
  - интеграция платежных систем, карт, внешних API;
  - оптимизация производительности и SEO для web‑проектов.

#### Роль в экосистеме MopUp

В рамках проекта MopUp Андрей выступает как ведущий разработчик и архитектор, отвечающий за связку всех компонентов экосистемы:

- сайт сервиса MopUp (frontend, REST API, SEO, интеграции карт и эквайринга);
- админ‑панель MopUp (Laravel, REST API, управление контентом, заказами, исполнителями, пуш‑уведомлениями);
- Telegram‑бот с mini‑приложением для заказа клининга;
- мобильные приложения MopUp:
  - приложение для клиентов (этот репозиторий) — заказ уборки, отслеживание статуса, push‑уведомления;
  - приложение для исполнителей — карта заказов, статусы, чат с кураторами, push‑уведомления.

#### Контакты

- Телефон: `+7 (999) 221-33-83`
- Email: `info@coderok.ru`
- Сайт: [`https://coderok.ru`](https://coderok.ru)

Актуальное резюме, портфолио, дополнительные проекты и фотография доступны на сайте [`coderok.ru`](https://coderok.ru) в разделах «Инфо», «Услуги» и «Мои работы».

---

### Статус репозитория и безопасность

- В репозиторий **не включаются**:
  - приватные ключи,
  - keystore (`mopup.jks`),
  - JSON‑ключи сервисных аккаунтов,
  - другие секреты.
- Все чувствительные данные должны храниться только локально или в безопасном хранилище (CI/CD секреты, менеджеры секретов).
- Перед сборкой убедитесь, что:
  - добавлены ваши файлы конфигурации Firebase;
  - настроены ключи карт и backend‑адреса для нужных окружений.
